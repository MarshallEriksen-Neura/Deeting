@import "tailwindcss";

/* ============================================
   Tailwind v4 dark mode variant
   ============================================ */
@custom-variant dark (&:is(.dark *));

/* ============================================
   阿里巴巴普惠体 - Local Font Face
   ============================================ */
@font-face {
  font-family: "AlibabaPuHuiTi";
  src: url("/fonts/AlibabaPuHuiTi-3/AlibabaPuHuiTi-3-35-Thin/AlibabaPuHuiTi-3-35-Thin.woff2") format("woff2"),
       url("/fonts/AlibabaPuHuiTi-3/AlibabaPuHuiTi-3-35-Thin/AlibabaPuHuiTi-3-35-Thin.woff") format("woff");
  font-weight: 100;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: "AlibabaPuHuiTi";
  src: url("/fonts/AlibabaPuHuiTi-3/AlibabaPuHuiTi-3-55-Regular/AlibabaPuHuiTi-3-55-Regular.woff2") format("woff2"),
       url("/fonts/AlibabaPuHuiTi-3/AlibabaPuHuiTi-3-55-Regular/AlibabaPuHuiTi-3-55-Regular.woff") format("woff");
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: "AlibabaPuHuiTi";
  src: url("/fonts/AlibabaPuHuiTi-3/AlibabaPuHuiTi-3-65-Medium/AlibabaPuHuiTi-3-65-Medium.woff2") format("woff2"),
       url("/fonts/AlibabaPuHuiTi-3/AlibabaPuHuiTi-3-65-Medium/AlibabaPuHuiTi-3-65-Medium.woff") format("woff");
  font-weight: 500;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: "AlibabaPuHuiTi";
  src: url("/fonts/AlibabaPuHuiTi-3/AlibabaPuHuiTi-3-85-Bold/AlibabaPuHuiTi-3-85-Bold.woff2") format("woff2"),
       url("/fonts/AlibabaPuHuiTi-3/AlibabaPuHuiTi-3-85-Bold/AlibabaPuHuiTi-3-85-Bold.woff") format("woff");
  font-weight: 700;
  font-style: normal;
  font-display: swap;
}

/* ============================================
   CSS Variables - Light Mode (Default for :root)
   ============================================ */
:root {
  color-scheme: light;

  /* Brand-inspired palette - Light Mode */
  --background: #f7f8ff;
  --foreground: #14162b;
  --surface: #ffffff;
  --card: #ffffff;
  --muted: #4b5070;
  --border: #dfe3ff;
  --primary: #7c6dff;
  --primary-soft: #a6b0ff;
  --teal-accent: #21c9c3;
  --gradient: linear-gradient(135deg, #8b7bff 0%, #5ec8ff 55%, #a6e1ff 100%);
}

/* ============================================
   CSS Variables - Dark Mode (via .dark class on html)
   ============================================ */
html.dark {
  color-scheme: dark;

  --background: #0f1016;
  --foreground: #e8ebff;
  --surface: #161725;
  --card: #1d1f30;
  --muted: #b3b8d9;
  --border: #232435;
  --primary: #7c6dff;
  --primary-soft: #a6b0ff;
  --teal-accent: #21c9c3;
  --gradient: linear-gradient(135deg, #8b7bff 0%, #5ec8ff 55%, #a6e1ff 100%);
}

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-surface: var(--surface);
  --color-card: var(--card);
  --color-muted: var(--muted);
  --color-border: var(--border);
  --color-primary: var(--primary);
  --color-primary-soft: var(--primary-soft);
  --color-teal-accent: var(--teal-accent);
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);
}

body {
  background: var(--background);
  color: var(--foreground);
  font-family: "AlibabaPuHuiTi", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  transition: background-color 0.3s ease-out, color 0.3s ease-out;
}

/* Light mode frosted glass veil */
html:not(.dark) body {
  position: relative;
}

html:not(.dark) body::before {
  content: "";
  position: fixed;
  inset: 0;
  pointer-events: none;
  background:
    radial-gradient(1200px at 15% 20%, rgba(124, 109, 255, 0.06), transparent 55%),
    radial-gradient(900px at 85% 10%, rgba(94, 200, 255, 0.05), transparent 60%),
    rgba(255, 255, 255, 0.14);
  backdrop-filter: blur(8px) saturate(1.04);
  -webkit-backdrop-filter: blur(8px) saturate(1.04);
  z-index: 0;
}

/* Lift actual content above the veil in light mode */
html:not(.dark) body > * {
  position: relative;
  z-index: 1;
}

/* ============================================
   Header Component Styles - Digital Ink Theme
   ============================================ */

/* Header glassmorphism enhancement */
header[data-slot="header"] {
  transition: all 0.3s ease-out;
}

/* Navigation link hover effect - ink brush stroke */
.nav-link {
  position: relative;
  overflow: hidden;
}

.nav-link::before {
  content: "";
  position: absolute;
  bottom: 0;
  left: 50%;
  width: 0;
  height: 2px;
  background: var(--primary);
  transform: translateX(-50%);
  transition: width 0.3s ease-out;
  border-radius: 9999px;
  box-shadow: 0 0 8px var(--primary);
}

.nav-link:hover::before {
  width: 80%;
}

/* Icon button hover glow effect */
.icon-btn-glow {
  transition: all 0.2s ease-out;
}

.icon-btn-glow:hover {
  box-shadow: 0 0 12px rgba(124, 109, 255, 0.2);
}

/* Avatar ring animation on hover */
.avatar-ring {
  transition: all 0.2s ease-out;
}

.avatar-ring:hover {
  box-shadow: 0 0 0 3px rgba(124, 109, 255, 0.3);
}

/* Notification dot pulse animation */
@keyframes glow-pulse {
  0%, 100% {
    opacity: 0.6;
    transform: scale(1);
  }
  50% {
    opacity: 1;
    transform: scale(1.2);
  }
}

.notification-dot {
  animation: glow-pulse 2s ease-in-out infinite;
}

/* Smooth dropdown menu appearance */
[data-radix-popper-content-wrapper] {
  animation: dropdown-in 0.2s ease-out;
}

@keyframes dropdown-in {
  from {
    opacity: 0;
    transform: translateY(-4px) scale(0.98);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

/* Header scroll shadow effect - optional JavaScript enhancement */
header.scrolled {
  box-shadow:
    0 4px 20px -2px rgba(124, 109, 255, 0.08),
    0 8px 30px -4px rgba(0, 0, 0, 0.1);
}

/* Accessibility focus styles */
[data-slot="button"]:focus-visible,
[data-slot="avatar"]:focus-visible,
a:focus-visible {
  outline: 2px solid var(--primary);
  outline-offset: 2px;
}

/* ============================================
   iOS Glass Components - Glassmorphism Styles
   ============================================ */

/* Glass Button 额外样式 */
[data-slot="glass-button"] {
  /* iOS 风格的触觉反馈 */
  -webkit-tap-highlight-color: transparent;
  touch-action: manipulation;
}

/* 按钮按压时的额外效果 */
[data-slot="glass-button"]:active {
  transition-duration: 50ms;
}

/* Glass Card 动画 */
[data-slot="glass-card"] {
  /* 优化性能 */
  will-change: transform, box-shadow;
  transform: translateZ(0);
}

/* Glass Card 渐进式入场动画 */
@keyframes glass-card-in {
  from {
    opacity: 0;
    transform: translateY(16px) scale(0.98);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

.animate-glass-card-in {
  animation: glass-card-in 0.4s ease-out forwards;
}

/* 错开入场动画 */
.stagger-1 { animation-delay: 0ms; }
.stagger-2 { animation-delay: 50ms; }
.stagger-3 { animation-delay: 100ms; }
.stagger-4 { animation-delay: 150ms; }
.stagger-5 { animation-delay: 200ms; }
.stagger-6 { animation-delay: 250ms; }

/* iOS 风格的微光效果 */
@keyframes shimmer {
  0% {
    background-position: -200% 0;
  }
  100% {
    background-position: 200% 0;
  }
}

.glass-shimmer {
  background: linear-gradient(
    90deg,
    transparent 0%,
    rgba(255, 255, 255, 0.05) 50%,
    transparent 100%
  );
  background-size: 200% 100%;
  animation: shimmer 3s infinite;
}

/* iOS 风格的呼吸光效 */
@keyframes ios-breathe {
  0%, 100% {
    box-shadow: 0 0 20px -5px rgba(124, 109, 255, 0.3);
  }
  50% {
    box-shadow: 0 0 30px -5px rgba(124, 109, 255, 0.5);
  }
}

.glass-breathe {
  animation: ios-breathe 3s ease-in-out infinite;
}

/* iOS 风格的涟漪效果 */
@keyframes ripple {
  0% {
    transform: scale(0);
    opacity: 0.5;
  }
  100% {
    transform: scale(4);
    opacity: 0;
  }
}

.glass-ripple {
  position: relative;
  overflow: hidden;
}

.glass-ripple::after {
  content: "";
  position: absolute;
  inset: 0;
  background: radial-gradient(circle, rgba(255, 255, 255, 0.2) 0%, transparent 70%);
  transform: scale(0);
  opacity: 0;
  pointer-events: none;
}

.glass-ripple:active::after {
  animation: ripple 0.6s ease-out;
}

/* Dark/Light mode glass card adjustments */
html:not(.dark) [data-slot="glass-card"] {
  --glass-border: rgba(0, 0, 0, 0.05);
  --glass-shine: rgba(255, 255, 255, 0.5);
}

html:not(.dark) [data-slot="glass-button"][data-variant="secondary"] {
  box-shadow: 0 2px 8px -2px rgba(0, 0, 0, 0.08),
              inset 0 1px 0 rgba(255, 255, 255, 0.5);
}

/* ============================================
   Theme Transition Utilities
   ============================================ */

/* Radial gradient background utility */
.bg-gradient-radial {
  background: radial-gradient(var(--tw-gradient-stops));
}

/* ============================================
   Scrollbar Visibility - Responsive
   ============================================ */
/* Hide both horizontal and vertical scrollbars on small screens; show them on tablets/desktop. */
@media (max-width: 767px) {
  html,
  body {
    scrollbar-width: none; /* Firefox */
    -ms-overflow-style: none; /* IE/Edge legacy */
  }

  html::-webkit-scrollbar,
  body::-webkit-scrollbar,
  *::-webkit-scrollbar {
    display: none;
    width: 0;
    height: 0;
  }
}
