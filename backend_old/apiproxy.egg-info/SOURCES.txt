pyproject.toml
alembic/env.py
alembic/versions/0001_create_auth_tables.py
alembic/versions/0002_add_user_profile_fields.py
alembic/versions/0003_add_api_keys_table.py
alembic/versions/0004_add_provider_tables.py
alembic/versions/0005_add_provider_type.py
alembic/versions/0006_add_api_key_provider_restrictions.py
alembic/versions/0007_add_provider_submission_and_user_permissions.py
alembic/versions/0008_add_provider_routing_metrics_history.py
alembic/versions/0009_extend_provider_routing_metrics_history.py
alembic/versions/0010_add_transport_and_is_stream_to_metrics_history.py
alembic/versions/0011_add_provider_model_alias.py
alembic/versions/0011_add_user_and_api_key_to_metrics_history.py
alembic/versions/0012_add_roles_and_seed_permissions.py
alembic/versions/0013_add_provider_presets_and_paths.py
alembic/versions/0014_add_sdk_vendor_to_providers_and_presets.py
alembic/versions/0015_add_credit_and_billing_tables.py
alembic/versions/0016_add_billing_factor_to_providers.py
alembic/versions/0017_add_approved_provider_to_submissions.py
alembic/versions/0018_add_registration_windows.py
alembic/versions/0019_add_api_key_status_fields.py
alembic/versions/0020_create_aggregate_metrics.py
alembic/versions/0021_add_credit_auto_topup_rules.py
alembic/versions/0023_add_gateway_config_table.py
alembic/versions/0024_add_notifications_tables.py
alembic/versions/0025_add_provider_allowed_users.py
alembic/versions/0026_add_provider_audit_tables.py
alembic/versions/0027_add_probe_settings.py
alembic/versions/0028_add_provider_fields_to_credit_transactions.py
alembic/versions/0029_create_user_routing_metrics_history.py
alembic/versions/0030_widen_alembic_version_num.py
alembic/versions/0031_add_upstream_proxy_management.py
alembic/versions/0032_make_provider_paths_nullable.py
alembic/versions/0033_add_claude_cli_transport_type.py
alembic/versions/0034_add_user_probe_tables.py
alembic/versions/0035_add_idempotency_key_to_credit_transactions.py
alembic/versions/0036_add_dashboard_v2_metrics_fields.py
alembic/versions/0037_add_metrics_retention_days_to_gateway_config.py
alembic/versions/0038_create_provider_routing_metrics_rollups.py
alembic/versions/0039_add_composite_indexes_for_metrics_history.py
alembic/versions/0040_add_disabled_to_provider_models.py
alembic/versions/0040_partition_provider_routing_metrics_history_by_day.py
alembic/versions/0041_merge_0040_heads.py
alembic/versions/0042_create_user_app_request_metrics_history.py
alembic/versions/0043_add_project_ai_eval_bandit_tables.py
alembic/versions/0044_add_project_ai_enabled_to_project_eval_configs.py
alembic/versions/0045_add_eval_id_to_chat_runs.py
alembic/versions/0046_add_conversation_pinned_preview_unread.py
alembic/versions/0047_add_title_model_to_assistant_presets.py
alembic/versions/0048_add_project_chat_settings_to_api_keys.py
alembic/versions/0049_change_last_message_content_to_text.py
alembic/versions/0050_add_bridge_agent_tokens_table.py
alembic/versions/0051_update_bridge_agent_tokens_drop_token_add_issued_at.py
alembic/versions/0052_create_chat_run_events.py
alembic/versions/0053_add_images_generations_path_to_providers.py
alembic/versions/0054_add_conversation_summary_fields.py
alembic/versions/0055_add_workflow_automation_tables.py
alembic/versions/0056_add_user_risk_fields.py
alembic/versions/0057_add_audio_assets_table.py
alembic/versions/0058_fix_audio_assets_timestamp_defaults.py
alembic/versions/0059_add_file_hashes_table.py
alembic/versions/0060_add_kb_embedding_model_to_api_keys.py
alembic/versions/0061_add_kb_memory_router_model_to_api_keys.py
alembic/versions/0062_add_conversation_memory_cursor.py
alembic/versions/0063_add_kb_attributes_table.py
alembic/versions/0064_add_system_configs_table.py
alembic/versions/0065_add_memory_metrics_history_tables.py
alembic/versions/0066_add_kb_global_embedding_model_to_gateway_config.py
apiproxy.egg-info/PKG-INFO
apiproxy.egg-info/SOURCES.txt
apiproxy.egg-info/dependency_links.txt
apiproxy.egg-info/entry_points.txt
apiproxy.egg-info/requires.txt
apiproxy.egg-info/top_level.txt
app/__init__.py
app/auth.py
app/celery_app.py
app/deps.py
app/errors.py
app/http_client.py
app/jwt_auth.py
app/log_sanitizer.py
app/logging_config.py
app/model_cache.py
app/proxy_pool.py
app/qdrant_client.py
app/redis_client.py
app/routes.py
app/settings.py
app/upstream.py
app/api/__init__.py
app/api/auth_routes.py
app/api/logical_model_routes.py
app/api/memory_metrics_routes.py
app/api/metrics_dashboard_v2_routes.py
app/api/metrics_routes.py
app/api/model_catalog_routes.py
app/api/provider_preset_routes.py
app/api/provider_routes.py
app/api/routing_routes.py
app/api/system_routes.py
app/api/v1/admin_agent_routes.py
app/api/v1/admin_eval_routes.py
app/api/v1/admin_memory_routes.py
app/api/v1/admin_notification_routes.py
app/api/v1/admin_provider_preset_routes.py
app/api/v1/admin_provider_routes.py
app/api/v1/admin_provider_rules_routes.py
app/api/v1/admin_registration_routes.py
app/api/v1/admin_role_routes.py
app/api/v1/admin_system_config_routes.py
app/api/v1/admin_upstream_proxy_routes.py
app/api/v1/admin_user_permission_routes.py
app/api/v1/admin_user_routes.py
app/api/v1/api_key_routes.py
app/api/v1/assistant_routes.py
app/api/v1/audio_routes.py
app/api/v1/bridge_routes.py
app/api/v1/chat_routes.py
app/api/v1/cli_config.py
app/api/v1/credit_routes.py
app/api/v1/eval_routes.py
app/api/v1/gateway_routes.py
app/api/v1/image_routes.py
app/api/v1/media_routes.py
app/api/v1/notification_routes.py
app/api/v1/private_provider_routes.py
app/api/v1/project_chat_settings_routes.py
app/api/v1/project_eval_config_routes.py
app/api/v1/project_memory_routes.py
app/api/v1/provider_key_routes.py
app/api/v1/provider_submission_routes.py
app/api/v1/request_logs_routes.py
app/api/v1/session_routes.py
app/api/v1/user_memory_routes.py
app/api/v1/user_provider_routes.py
app/api/v1/user_routes.py
app/api/v1/video_routes.py
app/api/v1/workflow_routes.py
app/api/v1/chat/__init__.py
app/api/v1/chat/billing.py
app/api/v1/chat/candidate_retry.py
app/api/v1/chat/header_builder.py
app/api/v1/chat/middleware.py
app/api/v1/chat/protocol_adapter.py
app/api/v1/chat/protocol_stream_adapter.py
app/api/v1/chat/provider_endpoint_resolver.py
app/api/v1/chat/provider_selector.py
app/api/v1/chat/request_handler.py
app/api/v1/chat/routing_state.py
app/api/v1/chat/sdk_stream_encoder.py
app/api/v1/chat/transport_handlers.py
app/api/v1/chat/transport_handlers_stream.py
app/api/v1/chat/upstream_error_classifier.py
app/api/v1/chat/transports/__init__.py
app/api/v1/chat/transports/base.py
app/api/v1/chat/transports/claude_cli_transport.py
app/api/v1/chat/transports/http_transport.py
app/api/v1/chat/transports/sdk_transport.py
app/api/v1/chat/utils/__init__.py
app/api/v1/chat/utils/payload_normalizer.py
app/api/v1/chat/utils/response_converter.py
app/db/__init__.py
app/db/migration_runner.py
app/db/session.py
app/db/types.py
app/metrics/__init__.py
app/metrics/offline_recalc.py
app/metrics/tasks.py
app/middleware/__init__.py
app/middleware/rate_limiter.py
app/middleware/request_validator.py
app/middleware/security_headers.py
app/models/__init__.py
app/models/agent_task.py
app/models/aggregate_metrics.py
app/models/api_key.py
app/models/api_key_allowed_provider.py
app/models/assistant_preset.py
app/models/audio_asset.py
app/models/bandit_arm_stats.py
app/models/base.py
app/models/bridge_agent_token.py
app/models/conversation.py
app/models/credit.py
app/models/eval.py
app/models/file_hash.py
app/models/identity.py
app/models/kb_attribute.py
app/models/memory_metrics_history.py
app/models/message.py
app/models/notification.py
app/models/permission.py
app/models/project_eval_config.py
app/models/provider.py
app/models/provider_allowed_user.py
app/models/provider_api_key.py
app/models/provider_audit_log.py
app/models/provider_metadata.py
app/models/provider_metrics_history.py
app/models/provider_model.py
app/models/provider_preset.py
app/models/provider_submission.py
app/models/provider_test_record.py
app/models/rating.py
app/models/registration_window.py
app/models/role.py
app/models/role_permission.py
app/models/run.py
app/models/run_event.py
app/models/system_config.py
app/models/system_gateway_config.py
app/models/upstream_proxy.py
app/models/user.py
app/models/user_app_metrics_history.py
app/models/user_metrics_history.py
app/models/user_permission.py
app/models/user_probe.py
app/models/user_role.py
app/models/workflow.py
app/models/workflow_run.py
app/models/workflow_run_event.py
app/provider/__init__.py
app/provider/claude_sdk.py
app/provider/config.py
app/provider/discovery.py
app/provider/google_sdk.py
app/provider/health.py
app/provider/key_pool.py
app/provider/openai_sdk.py
app/provider/sdk_selector.py
app/provider/utils.py
app/provider/vertexai_sdk.py
app/repositories/__init__.py
app/repositories/agent_task_repository.py
app/repositories/api_key_health_repository.py
app/repositories/api_key_provider_restriction_repository.py
app/repositories/api_key_repository.py
app/repositories/chat_repository.py
app/repositories/kb_attribute_repository.py
app/repositories/project_eval_config_repository.py
app/repositories/provider_audit_repository.py
app/repositories/provider_health_repository.py
app/repositories/provider_key_repository.py
app/repositories/provider_metadata_repository.py
app/repositories/provider_preset_repository.py
app/repositories/provider_repository.py
app/repositories/provider_submission_repository.py
app/repositories/run_event_repository.py
app/repositories/upstream_proxy_repository.py
app/repositories/user_app_metrics_repository.py
app/repositories/user_permission_repository.py
app/repositories/user_probe_repository.py
app/repositories/user_provider_repository.py
app/repositories/user_repository.py
app/repositories/workflow_run_event_repository.py
app/routing/__init__.py
app/routing/exceptions.py
app/routing/mapper.py
app/routing/metrics.py
app/routing/provider_weight.py
app/routing/scheduler.py
app/schemas/__init__.py
app/schemas/admin_evals.py
app/schemas/admin_memory.py
app/schemas/admin_system_config.py
app/schemas/agent_task.py
app/schemas/api_key.py
app/schemas/assistants.py
app/schemas/audio.py
app/schemas/audio_assets.py
app/schemas/audio_uploads.py
app/schemas/auth.py
app/schemas/credit.py
app/schemas/dashboard_v2.py
app/schemas/evals.py
app/schemas/image.py
app/schemas/logical_model.py
app/schemas/memory_metrics.py
app/schemas/memory_route.py
app/schemas/metrics.py
app/schemas/model.py
app/schemas/model_catalog.py
app/schemas/notification.py
app/schemas/project_chat_settings.py
app/schemas/project_eval_config.py
app/schemas/provider.py
app/schemas/provider_control.py
app/schemas/provider_routes.py
app/schemas/provider_rules.py
app/schemas/registration.py
app/schemas/request_logs.py
app/schemas/routing.py
app/schemas/routing_metrics.py
app/schemas/scheduling.py
app/schemas/system.py
app/schemas/token.py
app/schemas/upstream_proxy.py
app/schemas/user.py
app/schemas/user_memory.py
app/schemas/user_probe.py
app/schemas/video.py
app/schemas/workflow.py
app/services/__init__.py
app/services/api_key_cache.py
app/services/api_key_health.py
app/services/api_key_provider_restriction.py
app/services/api_key_service.py
app/services/audio_input_service.py
app/services/audio_storage_service.py
app/services/audit_service.py
app/services/avatar_service.py
app/services/avatar_storage_service.py
app/services/bandit_policy_service.py
app/services/bandit_routing_weight_service.py
app/services/bootstrap_admin.py
app/services/bridge_agent_token_service.py
app/services/bridge_gateway_client.py
app/services/bridge_tool_runner.py
app/services/chat_app_service.py
app/services/chat_history_service.py
app/services/chat_memory_extractor.py
app/services/chat_memory_retrieval.py
app/services/chat_memory_router.py
app/services/chat_routing_service.py
app/services/chat_run_service.py
app/services/claude_cli_transformer.py
app/services/client_app_fingerprint.py
app/services/compliance_service.py
app/services/context_features_service.py
app/services/conversation_summary_service.py
app/services/credit_grant_token_service.py
app/services/credit_service.py
app/services/embedding_service.py
app/services/encryption.py
app/services/eval_service.py
app/services/file_hash_service.py
app/services/image_app_service.py
app/services/image_generation_chat_service.py
app/services/image_storage_service.py
app/services/jwt_auth_service.py
app/services/kb_attribute_schema.py
app/services/key_management_service.py
app/services/linuxdo_oauth_service.py
app/services/logical_model_sync.py
app/services/memory_metrics_buffer.py
app/services/metrics_buffer.py
app/services/metrics_service.py
app/services/model_catalog_service.py
app/services/notification_service.py
app/services/project_ai_service.py
app/services/project_chat_settings_service.py
app/services/project_eval_config_service.py
app/services/prompt_loader.py
app/services/provider_audit_service.py
app/services/provider_health_service.py
app/services/provider_key_service.py
app/services/provider_preset_service.py
app/services/provider_submission_service.py
app/services/provider_validation_service.py
app/services/qdrant_bootstrap_service.py
app/services/qdrant_collection_service.py
app/services/registration_window_service.py
app/services/request_log_service.py
app/services/role_service.py
app/services/run_cancel_service.py
app/services/run_event_bus.py
app/services/sse_parser.py
app/services/stt_app_service.py
app/services/system_config_service.py
app/services/token_redis_service.py
app/services/tool_loop_runner.py
app/services/tts_app_service.py
app/services/user_app_metrics_service.py
app/services/user_permission_service.py
app/services/user_probe_executor.py
app/services/user_probe_service.py
app/services/user_provider_service.py
app/services/user_risk_service.py
app/services/user_service.py
app/services/video_app_service.py
app/services/video_generation_chat_service.py
app/services/video_storage_service.py
app/services/video_task_cache.py
app/services/workflow_bridge_dispatcher.py
app/services/workflow_engine.py
app/services/workflow_run_event_bus.py
app/services/workflow_runtime.py
app/services/crawler/__init__.py
app/services/crawler/browser.py
app/services/crawler/extractor.py
app/services/crawler/runner.py
app/services/knowledge_pipeline/__init__.py
app/services/knowledge_pipeline/chunker.py
app/services/knowledge_pipeline/dedupe.py
app/services/knowledge_pipeline/example.py
app/services/knowledge_pipeline/ingestor.py
app/services/provider/QUICK_REFERENCE.py
app/services/provider/__init__.py
app/services/provider/capability_matcher.py
app/services/provider/example_usage.py
app/services/provider/model_syncer.py
app/services/provider/rule_generator.py
app/services/provider/rule_validator.py
app/services/upstream_proxy/__init__.py
app/services/upstream_proxy/redis.py
app/services/upstream_proxy/secrets.py
app/services/upstream_proxy/utils.py
app/storage/__init__.py
app/storage/qdrant_kb_collections.py
app/storage/qdrant_kb_store.py
app/storage/qdrant_service.py
app/storage/redis_service.py
app/tasks/__init__.py
app/tasks/agent_tasks.py
app/tasks/api_key_health.py
app/tasks/chat_memory.py
app/tasks/chat_run.py
app/tasks/conversation_title.py
app/tasks/credit_auto_topup.py
app/tasks/credit_billing.py
app/tasks/image_generation_run.py
app/tasks/model_catalog.py
app/tasks/provider_audit.py
app/tasks/registration.py
app/tasks/session_maintenance.py
app/tasks/upstream_proxy_pool.py
app/tasks/user_probe.py
app/tasks/video_generation_run.py
app/utils/__init__.py
app/utils/payload_utils.py
app/utils/response_utils.py
app/workers/__init__.py
app/workers/base.py
tests/test_admin_evals_routes.py
tests/test_admin_memory_routes.py
tests/test_admin_system_config_routes.py
tests/test_admin_upstream_proxy_routes.py
tests/test_admin_users_risk_status.py
tests/test_alembic_config.py
tests/test_api_key_routes.py
tests/test_assistants_list_includes_system_prompt.py
tests/test_audio_assets_library.py
tests/test_audio_transcriptions.py
tests/test_auth.py
tests/test_bridge_agent_token_routes.py
tests/test_bridge_gateway_unavailable.py
tests/test_candidate_retry_failure_marking.py
tests/test_celery_config.py
tests/test_chat_context_window.py
tests/test_chat_disabled_model.py
tests/test_chat_greeting.py
tests/test_chat_memory_cursor_extraction.py
tests/test_chat_memory_retrieval_utils.py
tests/test_chat_memory_router.py
tests/test_chat_provider_restrictions_dynamic_discovery.py
tests/test_chat_run_enqueue.py
tests/test_chat_stream_preflight_errors.py
tests/test_cli_config_routes.py
tests/test_compliance_service.py
tests/test_conversation_archived.py
tests/test_conversation_audio_uploads.py
tests/test_conversation_clear_messages.py
tests/test_conversation_features.py
tests/test_conversation_image_generation_omit_response_format.py
tests/test_conversation_image_generations_streaming.py
tests/test_conversation_messages_streaming.py
tests/test_conversation_messages_streaming_db_fallback.py
tests/test_conversation_title_fallback.py
tests/test_conversation_title_sanitize_think.py
tests/test_conversation_video_generations.py
tests/test_credit_system.py
tests/test_curlcffi_http2_fallback.py
tests/test_docs_routes_disabled_in_production.py
tests/test_eval_streaming.py
tests/test_global_exception_handler.py
tests/test_header_builder.py
tests/test_image_generations_route.py
tests/test_jwt_requires_jti_in_production.py
tests/test_kb_attribute_repository.py
tests/test_linuxdo_oauth.py
tests/test_log_sanitizer.py
tests/test_logging_business_split.py
tests/test_logging_dir_resolution.py
tests/test_media_images_signed_url.py
tests/test_memory_debug_logging.py
tests/test_memory_metrics_routes.py
tests/test_message_speech_reference_audio.py
tests/test_metrics_buffer_lifecycle.py
tests/test_metrics_dashboard_v2_api.py
tests/test_metrics_proxy_retry.py
tests/test_metrics_timeseries_api.py
tests/test_models_route.py
tests/test_notification_routes.py
tests/test_private_provider_cache_invalidation.py
tests/test_project_ai_eval_bandit_mvp.py
tests/test_protocol_adapter.py
tests/test_provider_audit_routes.py
tests/test_provider_endpoint_resolver.py
tests/test_provider_key_export_backward_compat.py
tests/test_provider_key_routes.py
tests/test_provider_model_routes.py
tests/test_provider_models_list_routes.py
tests/test_provider_preset_import_export.py
tests/test_provider_selector.py
tests/test_provider_selector_availability.py
tests/test_provider_sharing.py
tests/test_provider_submission_routes.py
tests/test_qdrant_client.py
tests/test_qdrant_collection_service.py
tests/test_qdrant_kb_collections.py
tests/test_qdrant_kb_store.py
tests/test_redis_client.py
tests/test_regenerate_message_with_context.py
tests/test_registration_window.py
tests/test_request_handler.py
tests/test_request_handler_stream_provider_sink.py
tests/test_request_logs_routes.py
tests/test_run_cancel_endpoint.py
tests/test_run_event_repository.py
tests/test_run_events_sse_replay.py
tests/test_schemas_exports.py
tests/test_sdk_vendors.py
tests/test_security_middleware.py
tests/test_stream_error_frames.py
tests/test_system_cache_clear_routes.py
tests/test_system_gateway_config_routes.py
tests/test_transport_backward_compatibility.py
tests/test_transport_custom_headers.py
tests/test_tts_golden_payloads.py
tests/test_tts_reference_audio_filter.py
tests/test_tts_routes.py
tests/test_tts_schema_and_cache.py
tests/test_upstream_stream.py
tests/test_user_probe_tasks.py
tests/test_user_quota_routes.py
tests/test_user_routes.py