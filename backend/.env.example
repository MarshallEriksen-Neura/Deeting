# 基础
PROJECT_NAME="AI Higress Gateway"
ENVIRONMENT=development  # development/production/test
DEBUG=true
API_V1_STR="/api/v1"

# 数据库
DATABASE_URL="postgresql+asyncpg://postgres:postgres@localhost:5432/ai_gateway"

# Redis（缓存/限流/封禁）
REDIS_URL="redis://localhost:6379/0"
REDIS_ENCODING="utf-8"
CACHE_PREFIX="ai_gateway:"
CACHE_DEFAULT_TTL=300

# 日志
LOG_LEVEL=INFO
LOG_JSON_FORMAT=false
LOG_FILE_PATH="logs/app.log"
LOG_ROTATION="500 MB"
LOG_RETENTION="10 days"

# 安全中间件
ENABLE_SECURITY_MIDDLEWARE=false
SECURITY_XSS_PROTECTION=true
SECURITY_CONTENT_TYPE_OPTIONS=true
SECURITY_FRAME_OPTIONS=true
ENABLE_HSTS=false
HSTS_MAX_AGE=31536000
BAN_IP_ON_DETECTION=false
BAN_TTL_SECONDS=900
INSPECT_REQUEST_BODY=false
INSPECT_BODY_MAX_LENGTH=

# 上游安全（SSRF 防护）
OUTBOUND_WHITELIST="api.openai.com,api.deepseek.com,*.azure.com"
ALLOW_CUSTOM_UPSTREAM=true
ALLOW_INTERNAL_NETWORKS=false
BLOCKED_SUBNETS="127.0.0.0/8,10.0.0.0/8,172.16.0.0/12,192.168.0.0/16,169.254.0.0/16,224.0.0.0/4,0.0.0.0/8,::1/128,fc00::/7,fe80::/10"

# 网关并发/队列
GATEWAY_MAX_CONCURRENCY=200
GATEWAY_QUEUE_TIMEOUT=0.25

# JWT / 密钥（务必替换为生产值）
JWT_SECRET_KEY="change_me_for_hs256_fallback"
JWT_ALGORITHM=RS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7
JWT_PRIVATE_KEY_PATH="security/private.pem"
JWT_PUBLIC_KEY_PATH="security/public.pem"
SECRET_KEY="change_me_for_hmac_encryption"

# 对象存储
OSS_PROVIDER="aliyun_oss"
OSS_ENDPOINT=""
OSS_REGION=""
OSS_ACCESS_KEY_ID=""
OSS_ACCESS_KEY_SECRET=""
OSS_PUBLIC_BUCKET="ai-gateway-public"
OSS_PRIVATE_BUCKET="ai-gateway-private"
OSS_PUBLIC_BASE_URL=""
ASSET_STORAGE_MODE="auto"
ASSET_LOCAL_DIR="backend/media/assets"
ASSET_OSS_PREFIX="assets"
ASSET_SIGNED_URL_TTL_SECONDS=3600

# CORS
BACKEND_CORS_ORIGINS='["*"]'

# Qdrant（可选）
QDRANT_ENABLED=false
QDRANT_URL=
QDRANT_API_KEY=
QDRANT_TIMEOUT_SECONDS=10.0
QDRANT_KB_CANDIDATES_COLLECTION=kb_candidates
QDRANT_KB_SYSTEM_COLLECTION=kb_system
QDRANT_KB_USER_COLLECTION=kb_user
QDRANT_KB_USER_SHARED_COLLECTION=kb_shared_v1
QDRANT_KB_USER_COLLECTION_STRATEGY=per_user
QDRANT_KB_USER_COLLECTION_SHARDS=16
QDRANT_TOOL_SYSTEM_COLLECTION=sys_tool_index
QDRANT_TOOL_USER_COLLECTION_PREFIX=kb_user

# MCP 工具检索配置
MCP_TOOL_JIT_THRESHOLD=15
MCP_TOOL_USER_TOPK=5
MCP_TOOL_SYSTEM_TOPK=3
MCP_TOOL_SCORE_THRESHOLD=0.75
MCP_TOOL_SYSTEM_INDEX_HASH_TTL_SECONDS=86400

# Spec Knowledge 三层漏斗配置
SPEC_KB_OBSERVATION_WINDOW_SECONDS=900
SPEC_KB_EVAL_MIN_SCORE=85
SPEC_KB_AUTO_PROMOTE_UNIQUE_SESSIONS=5
SPEC_KB_AUTO_PROMOTE_WINDOW_DAYS=7
SPEC_KB_EDIT_DISTANCE_THRESHOLD=0.3
SPEC_KB_EVAL_MODEL=

# Celery
CELERY_BROKER_URL="redis://localhost:6379/1"
CELERY_RESULT_BACKEND="redis://localhost:6379/1"
CELERY_TASK_DEFAULT_QUEUE="default"
CELERY_TIMEZONE="UTC"

# 会话摘要（可选）
CONVERSATION_SUMMARY_IDLE_SECONDS=600

# Scout Service (Cognitive Engine)
SCOUT_SERVICE_URL="http://localhost:8001"

# AI Models (OpenAI / DeepSeek / etc.)
OPENAI_API_KEY="sk-..."
OPENAI_BASE_URL="https://api.openai.com/v1"
EMBEDDING_MODEL="text-embedding-3-small"

# LinuxDo OAuth（可选）
LINUXDO_OAUTH_ENABLED=false
LINUXDO_CLIENT_ID=
LINUXDO_CLIENT_SECRET=
LINUXDO_REDIRECT_URI=
